<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Clash Royale by Arlo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #e3f2fd;
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  #gameArea {
    margin: 20px auto;
    width: 400px;
    height: 300px;
    border: 3px solid #2196f3;
    background: #bbdefb;
    position: relative;
  }
  .tower {
    width: 60px;
    height: 120px;
    background: #1565c0;
    position: absolute;
    bottom: 0;
  }
  #playerTower {
    left: 10px;
  }
  #enemyTower {
    right: 10px;
  }
  .unit {
    width: 30px;
    height: 30px;
    background: #ff5722;
    position: absolute;
    bottom: 120px;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    font-size: 14px;
  }
  #enemyUnits .unit {
    background: #4caf50;
  }
  #controls {
    margin-top: 15px;
  }
  button {
    background: #2196f3;
    color: white;
    border: none;
    padding: 10px 15px;
    margin: 0 10px 10px 10px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
  }
  button:disabled {
    background: #90caf9;
    cursor: not-allowed;
  }
  #backBtn {
    background: #f44336;
  }
  #status {
    margin-top: 15px;
    font-weight: bold;
  }
  #message {
    font-size: 24px;
    font-weight: 700;
    color: #d32f2f;
    margin: 10px 0;
    height: 30px;
  }
</style>
</head>
<body>

<h1>Mini Clash Royale by Arlo</h1>
<div id="message"></div>
<div id="gameArea">
  <div id="playerTower" class="tower"></div>
  <div id="enemyTower" class="tower"></div>
  <div id="playerUnits"></div>
  <div id="enemyUnits"></div>
</div>

<div id="controls">
  <button data-type="1" data-cost="3" data-hp="3">Spawn Troop Lv1 (3 Elixir)</button>
  <button data-type="2" data-cost="5" data-hp="5">Spawn Troop Lv2 (5 Elixir)</button>
  <button data-type="3" data-cost="7" data-hp="8">Spawn Troop Lv3 (7 Elixir)</button>
  <br />
  <button id="backBtn">‚Üê Back to Home</button>
</div>

<div id="status">Player Tower HP: 10 | Enemy Tower HP: 10 | Elixir: 10</div>

<script>
  // Tower objects
  const playerTower = { hp: 10, element: document.getElementById('playerTower') };
  const enemyTower = { hp: 10, element: document.getElementById('enemyTower') };

  // Unit containers
  const playerUnitsDiv = document.getElementById('playerUnits');
  const enemyUnitsDiv = document.getElementById('enemyUnits');

  let playerUnits = [];
  let enemyUnits = [];

  // Elixir and cost settings
  let playerElixir = 10;
  const maxElixir = 10;
  const elixirRechargeRate = 1; // per second

  const statusDiv = document.getElementById('status');
  const messageDiv = document.getElementById('message');

  let gameOver = false;

  // Update status text
  function updateStatus() {
    statusDiv.textContent = `Player Tower HP: ${playerTower.hp} | Enemy Tower HP: ${enemyTower.hp} | Elixir: ${playerElixir}`;
  }

  // Create unit element
  function createUnit(level, side) {
    const unit = document.createElement('div');
    unit.classList.add('unit');
    if(side === 'enemy') unit.style.background = '#4caf50';

    // Position
    unit.style.bottom = '120px';
    if(side === 'player') unit.style.left = '70px';
    else unit.style.right = '70px';

    // Level styling and label
    unit.textContent = `Lv${level}`;
    unit.side = side;
    unit.hp = [0,3,5,8][level] || 3; // hp by level
    unit.level = level;
    return unit;
  }

  // Move all units
  function moveUnits() {
    if(gameOver) return;

    playerUnits.forEach((unit, i) => {
      const currentLeft = parseInt(unit.style.left);
      if(currentLeft >= 350) {
        enemyTower.hp--;
        removeUnit(unit, 'player', i);
        checkGameOver();
        updateStatus();
        return;
      }
      unit.style.left = currentLeft + 1 + 'px';
    });

    enemyUnits.forEach((unit, i) => {
      const currentRight = parseInt(unit.style.right);
      if(currentRight >= 350) {
        playerTower.hp--;
        removeUnit(unit, 'enemy', i);
        checkGameOver();
        updateStatus();
        return;
      }
      unit.style.right = currentRight + 1 + 'px';
    });

    // Check collisions and fight
    for(let i = 0; i < playerUnits.length; i++) {
      const pUnit = playerUnits[i];
      const pPos = parseInt(pUnit.style.left);
      for(let j = 0; j < enemyUnits.length; j++) {
        const eUnit = enemyUnits[j];
        const ePos = 400 - parseInt(eUnit.style.right);

        if(Math.abs(pPos - ePos) < 30) {
          pUnit.hp--;
          eUnit.hp--;
          if(pUnit.hp <= 0) removeUnit(pUnit, 'player', i);
          if(eUnit.hp <= 0) removeUnit(eUnit, 'enemy', j);
          updateStatus();
          break;
        }
      }
    }
  }

  // Remove unit helper
  function removeUnit(unit, side, index) {
    if(side === 'player') {
      if(playerUnits[index] === unit) {
        playerUnits.splice(index,1);
        unit.remove();
      }
    } else {
      if(enemyUnits[index] === unit) {
        enemyUnits.splice(index,1);
        unit.remove();
      }
    }
  }

  // Spawn player troop with level, cost, hp from buttons
  function spawnPlayerUnit(level, cost) {
    if(gameOver) return;
    if(playerElixir >= cost) {
      const unit = createUnit(level, 'player');
      playerUnits.push(unit);
      playerUnitsDiv.appendChild(unit);
      playerElixir -= cost;
      updateStatus();
    } else {
      alert('Not enough Elixir!');
    }
  }

  // Enemy AI spawning troops randomly between levels 1-3
  function spawnEnemyUnit() {
    if(gameOver) return;
    const level = Math.floor(Math.random() * 3) + 1;
    const unit = createUnit(level, 'enemy');
    enemyUnits.push(unit);
    enemyUnitsDiv.appendChild(unit);
  }

  // Recharge elixir every second
  setInterval(() => {
    if(gameOver) return;
    if(playerElixir < maxElixir) {
      playerElixir++;
      updateStatus();
    }
  }, 1000);

  // Enemy spawn loop
  setInterval(() => {
    spawnEnemyUnit();
  }, 3000);

  // Units move loop
  setInterval(() => {
    moveUnits();
  }, 30);

  // Check game end conditions
  function checkGameOver() {
    if(gameOver) return;
    if(playerTower.hp <= 0) {
      gameOver = true;
      messageDiv.textContent = 'Game Over! Enemy Wins!';
      disableControls();
      return;
    }
    if(enemyTower.hp <= 0) {
      gameOver = true;
      messageDiv.textContent = 'You Win! Congratulations!';
      disableControls();
      return;
    }
  }

  // Disable spawn buttons after game ends
  function disableControls() {
    document.querySelectorAll('#controls button[data-type]').forEach(btn => btn.disabled = true);
  }

  updateStatus();

  // Button event listeners for spawn troops
  const buttons = document.querySelectorAll('#controls button[data-type]');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const level = parseInt(btn.getAttribute('data-type'));
      const cost = parseInt(btn.getAttribute('data-cost'));
      spawnPlayerUnit(level, cost);
    });
  });

  // Back button - reloads page (you can customize to go back to home in your site)
  document.getElementById('backBtn').addEventListener('click', () => {
    location.reload();
  });
</script>

</body>
</html>